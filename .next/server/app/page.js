(()=>{var e={};e.id=974,e.ids=[974],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},72971:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(70260),n=s(28203),i=s(25155),a=s.n(i),o=s(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,61377)),"/Users/zhuzhueyunle/Desktop/work/github/memorandum/src/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,71354)),"/Users/zhuzhueyunle/Desktop/work/github/memorandum/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/zhuzhueyunle/Desktop/work/github/memorandum/src/app/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},80271:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,13219,23)),Promise.resolve().then(s.t.bind(s,34863,23)),Promise.resolve().then(s.t.bind(s,25155,23)),Promise.resolve().then(s.t.bind(s,9350,23)),Promise.resolve().then(s.t.bind(s,96313,23)),Promise.resolve().then(s.t.bind(s,48530,23)),Promise.resolve().then(s.t.bind(s,88921,23))},88519:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,66959,23)),Promise.resolve().then(s.t.bind(s,33875,23)),Promise.resolve().then(s.t.bind(s,88903,23)),Promise.resolve().then(s.t.bind(s,84178,23)),Promise.resolve().then(s.t.bind(s,86013,23)),Promise.resolve().then(s.t.bind(s,87190,23)),Promise.resolve().then(s.t.bind(s,61365,23))},50068:(e,t,s)=>{Promise.resolve().then(s.bind(s,71354))},2804:(e,t,s)=>{Promise.resolve().then(s.bind(s,39246))},58579:(e,t,s)=>{Promise.resolve().then(s.bind(s,61377))},95531:(e,t,s)=>{Promise.resolve().then(s.bind(s,80029))},39246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(45512);function n({children:e}){return(0,r.jsxs)("html",{lang:"zh",children:[(0,r.jsxs)("head",{children:[(0,r.jsx)("title",{children:"备忘录"}),(0,r.jsx)("meta",{name:"description",content:"备忘录"})]}),(0,r.jsx)("body",{children:e})]})}s(44263),s(58009)},80029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(45512),n=s(58009),i=s(79334);function a(){let e=(0,i.useRouter)(),[t,s]=(0,n.useState)([]),[a,o]=(0,n.useState)([]),[l,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[b,v]=(0,n.useState)([]),g=[...t].sort((e,t)=>e.isPinned===t.isPinned?new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime():e.isPinned?-1:1).filter(e=>{let t=e.title.toLowerCase().includes(h.toLowerCase())||e.content.toLowerCase().includes(h.toLowerCase()),s=!l||e.categoryId===l;return t&&s}),f=async()=>{if(b.length&&confirm(`确定要删除选中的 ${b.length} 条笔记吗？`))try{if(!(await fetch("/api/notes/batch-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:b})})).ok)throw Error("删除失败");s(t.filter(e=>!b.includes(e.id))),v([]),x(!1)}catch(e){console.error("批量删除失败:",e),alert("删除失败，请重试")}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("nav",{className:"sticky top-0 bg-white/80 backdrop-blur-md shadow-sm z-50",children:(0,r.jsx)("div",{className:"container-custom",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"我的备忘录"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{x(!p),v([])},className:"p-2 text-gray-600 hover:text-gray-700",children:p?"取消":(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),p?(0,r.jsxs)("button",{onClick:f,disabled:!b.length,className:"p-2 text-red-600 hover:text-red-700 disabled:opacity-50",children:["删除(",b.length,")"]}):(0,r.jsx)("button",{onClick:()=>e.push("/notes/new"),className:"p-2 text-blue-600 hover:text-blue-700",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>e.push("/categories"),className:"btn-outline",children:"分类管理"}),(0,r.jsx)("button",{onClick:()=>e.push("/profile"),className:"btn-outline",children:"个人信息"})]})]})]})})}),(0,r.jsxs)("main",{className:"container-custom py-6",children:[(0,r.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,r.jsx)("input",{type:"text",placeholder:"搜索...",className:"input-field",value:h,onChange:e=>m(e.target.value)}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{onClick:()=>d(null),className:`px-3 py-1.5 rounded-full transition-colors ${null===l?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"全部"}),a.map(e=>(0,r.jsx)("button",{onClick:()=>d(e.id),className:`px-3 py-1.5 rounded-full transition-colors ${l===e.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.name},e.id))]})]}),c?(0,r.jsx)("div",{className:"flex justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent"})}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(t=>(0,r.jsxs)("div",{className:"card p-4 cursor-pointer group relative",onClick:s=>{p?v(e=>e.includes(t.id)?e.filter(e=>e!==t.id):[...e,t.id]):e.push(`/notes/${t.id}`)},children:[p&&(0,r.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,r.jsx)("input",{type:"checkbox",checked:b.includes(t.id),onChange:()=>{},className:"w-5 h-5 rounded border-gray-300"})}),(0,r.jsxs)("div",{className:p?"pr-8":"",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg group-hover:text-blue-600 transition-colors",children:t.title}),t.isPinned&&(0,r.jsx)("span",{className:"text-yellow-500",children:"\uD83D\uDCCC"})]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm line-clamp-3",children:t.content}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-400",children:[(0,r.jsx)("span",{children:new Date(t.createdAt).toLocaleDateString()}),(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full",children:a.find(e=>e.id===t.categoryId)?.name})]}),t.hasReminder&&t.reminderTime&&(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-500 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"提醒时间：",new Date(t.reminderTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]},t.id))}),!c&&0===g.length&&(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:h||l?"没有找到相关笔记":"还没有笔记，开始创建吧！"})})]}),(0,r.jsxs)("nav",{className:"mobile-nav",children:[(0,r.jsxs)("button",{className:"nav-item",children:[(0,r.jsx)("span",{className:"text-xl mb-1",children:"\uD83D\uDCDD"}),(0,r.jsx)("span",{children:"所有笔记"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/categories"),className:"nav-item",children:[(0,r.jsx)("span",{className:"text-xl mb-1",children:"\uD83D\uDCC1"}),(0,r.jsx)("span",{children:"分类管理"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/profile"),className:"nav-item",children:[(0,r.jsx)("span",{className:"text-xl mb-1",children:"\uD83D\uDC64"}),(0,r.jsx)("span",{children:"个人信息"})]})]})]})}},71354:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/zhuzhueyunle/Desktop/work/github/memorandum/src/app/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/zhuzhueyunle/Desktop/work/github/memorandum/src/app/layout.tsx","default")},61377:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/zhuzhueyunle/Desktop/work/github/memorandum/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/zhuzhueyunle/Desktop/work/github/memorandum/src/app/page.tsx","default")},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(88077);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},44263:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[989,112,720],()=>s(72971));module.exports=r})();